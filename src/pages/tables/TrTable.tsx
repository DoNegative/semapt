import React, { useState, useEffect } from "react";
import "./table.css";
import { UsersInterface,DeleteUserInfo } from "../APIS";
import ModalWindow from "../../Components/ModalWindow/ModalWindow";
import AddUser from "./AddUser";

interface TrTableInteface {
  tr: UsersInterface;
  getUserInfo:()=>void
}

const TrTable: React.FC<TrTableInteface> = ({ tr, getUserInfo }) => {
  const [activeEdit, setActiveEdit] = useState(false);

  async function DeleteUserApi() {
    try {
      const response = await DeleteUserInfo(tr.id);

      getUserInfo()
      console.log(response);
    } catch (e) {
      console.log(e);
    }
  }

  useEffect(() => {}, []);

  return (
    <tr>
      <td>{tr.FIO}</td>
      <td>{tr.email}</td>
      <td>{tr.number_phone}</td>
      <td>{tr.position.name}</td>
      <td>{tr.position.wage}</td>
      <td>
        <div style={{display:"flex", justifyContent:"space-around", alignItems:'center'}}>
        <a onClick={() => setActiveEdit(true)}>
          <svg
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M0.274665 13.2765L0.00666583 16.2214C-0.0346916 16.6775 0.117739 17.1301 0.426623 17.4685C0.735508 17.8069 1.17223 17.9998 1.63028 18C1.67943 18 1.7293 18 1.77893 17.9931L4.72215 17.7254C5.5023 17.6542 6.23302 17.312 6.78696 16.7581L14.3598 9.1883L17.226 6.32234C17.7213 5.82558 17.9997 5.15251 17.9997 4.45059C17.9997 3.7489 17.7213 3.07584 17.226 2.57907L15.4224 0.773981C14.9256 0.278162 14.2525 0 13.5506 0C12.8489 0 12.1758 0.278162 11.6791 0.773981L8.81408 3.63831L1.24428 11.2111C0.689377 11.7651 0.346056 12.4956 0.274665 13.2765ZM13.1764 2.27087C13.2756 2.17162 13.4103 2.1156 13.5507 2.1156C13.6913 2.1156 13.826 2.17161 13.9253 2.27087L15.7285 4.07408C15.8278 4.17334 15.8838 4.30805 15.8838 4.44867C15.8838 4.58905 15.8278 4.72376 15.7285 4.82301L14.3611 6.19044L11.8089 3.63829L13.1764 2.27087Z"
              fill="#4791FF"
            />
          </svg>
        </a>
        <a onClick={() =>DeleteUserApi()}>
          <svg
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6.54198 18H11.792C12.7862 17.9988 13.7395 17.6034 14.4424 16.9005C15.1454 16.1975 15.5408 15.2442 15.542 14.25V4.125H16.667C16.935 4.125 17.1826 3.98203 17.3165 3.75C17.4505 3.51797 17.4505 3.23203 17.3165 3C17.1826 2.76797 16.935 2.625 16.667 2.625H12.167V1.875C12.1663 1.37794 11.9686 0.901329 11.6172 0.549772C11.2656 0.198377 10.789 0.000685714 10.292 0H8.04198C7.54493 0.000669643 7.06831 0.198382 6.71675 0.549772C6.36536 0.901333 6.16767 1.37794 6.16698 1.875V2.625H1.66698C1.39896 2.625 1.15137 2.76797 1.01744 3C0.88351 3.23203 0.88351 3.51797 1.01744 3.75C1.15137 3.98203 1.39897 4.125 1.66698 4.125H2.79198V14.25C2.79315 15.2442 3.18858 16.1975 3.89153 16.9005C4.59447 17.6034 5.54774 17.9988 6.54198 18ZM7.66698 1.875C7.66698 1.66791 7.8349 1.5 8.04198 1.5H10.292C10.3914 1.5 10.4868 1.53951 10.5572 1.60982C10.6275 1.68013 10.667 1.77556 10.667 1.875V2.625H7.66698V1.875Z"
              fill="#6A87B4"
            />
            <path
              d="M6.76164 12.1551C6.90226 12.2957 7.09294 12.3747 7.29182 12.3747C7.4907 12.3747 7.68138 12.2957 7.82201 12.1551L9.16682 10.8104L10.5116 12.1552V12.1551C10.7021 12.339 10.9755 12.409 11.231 12.339C11.4863 12.2689 11.6858 12.0693 11.756 11.814C11.826 11.5586 11.756 11.2852 11.572 11.0947L10.2274 9.74987L11.5722 8.40506H11.572C11.756 8.21454 11.826 7.94117 11.756 7.6857C11.6859 7.4304 11.4863 7.23086 11.231 7.1607C10.9755 7.09072 10.7021 7.1607 10.5116 7.34468L9.16682 8.68933L7.82201 7.34451V7.34468C7.6315 7.16069 7.35812 7.09072 7.10265 7.16069C6.84735 7.23084 6.64781 7.43039 6.57765 7.68569C6.50768 7.94116 6.57765 8.21455 6.76164 8.40505L8.10628 9.74987L6.76147 11.0947H6.76164C6.62101 11.2353 6.54199 11.426 6.54199 11.6249C6.54199 11.8237 6.62101 12.0144 6.76164 12.1551Z"
              fill="white"
            />
          </svg>
        </a>
        </div>
      </td>
      <ModalWindow setActive={setActiveEdit} active={activeEdit}>
          <AddUser setActive={setActiveEdit} active={activeEdit}  getUserInfoProps={ getUserInfo} checkEdit={true} id={tr.id}></AddUser>
        </ModalWindow>
    </tr>
  );
};

export default TrTable;
